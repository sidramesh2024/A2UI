{
  "schema": "server_to_client.json",
  "tests": [
    {
      "description": "TextField with valid checks",
      "valid": true,
      "data": {
        "version": "v0.10",
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "tf1",
              "component": "TextField",
              "label": "Email",
              "value": { "path": "/formData/email" },
              "checks": [
                {
                  "condition": {
                    "call": "required",
                    "args": { "value": { "path": "/formData/email" } },
                    "returnType": "boolean"
                  },
                  "message": "Email is required"
                },
                {
                  "condition": {
                    "call": "email",
                    "args": { "value": { "path": "/formData/email" } },
                    "returnType": "boolean"
                  },
                  "message": "Must be valid email"
                }
              ]
            }
          ]
        }
      }
    },
    {
      "description": "ChoicePicker with valid checks",
      "valid": true,
      "data": {
        "version": "v0.10",
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "cp1",
              "component": "ChoicePicker",
              "label": "Interests",
              "variant": "multipleSelection",
              "options": [
                { "label": "Code", "value": "code" },
                { "label": "Design", "value": "design" }
              ],
              "value": { "path": "/formData/interests" },
              "checks": [
                {
                  "condition": {
                    "call": "length",
                    "args": {
                      "value": { "path": "/formData/interests" },
                      "min": 1
                    },
                    "returnType": "boolean"
                  },
                  "message": "Select at least one"
                }
              ]
            }
          ]
        }
      }
    },
    {
      "description": "Slider with valid checks",
      "valid": true,
      "data": {
        "version": "v0.10",
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "sl1",
              "component": "Slider",
              "label": "Rating",
              "min": 1,
              "max": 5,
              "value": { "path": "/formData/rating" },
              "checks": [
                {
                  "condition": {
                    "call": "numeric",
                    "args": {
                      "value": { "path": "/formData/rating" },
                      "min": 3
                    },
                    "returnType": "boolean"
                  },
                  "message": "Rating must be > 3"
                }
              ]
            }
          ]
        }
      }
    },
    {
      "description": "CheckBox with valid checks",
      "valid": true,
      "data": {
        "version": "v0.10",
        "updateComponents": {
          "surfaceId": "test_1",
          "components": [
            {
              "id": "cb1",
              "component": "CheckBox",
              "label": "I agree",
              "value": { "path": "/formData/agreed" },
              "checks": [
                {
                  "condition": {
                    "call": "required",
                    "args": { "value": { "path": "/formData/agreed" } },
                    "returnType": "boolean"
                  },
                  "message": "Must agree"
                }
              ]
            }
          ]
        }
      }
    },
    {
      "description": "DateTimeInput with valid checks",
      "valid": true,
      "data": {
        "version": "v0.10",
        "updateComponents": {
          "surfaceId": "test_1",
          "components": [
            {
              "id": "dt1",
              "component": "DateTimeInput",
              "label": "Date",
              "value": { "path": "/formData/date" },
              "checks": [
                {
                  "condition": {
                    "call": "required",
                    "args": { "value": { "path": "/formData/date" } },
                    "returnType": "boolean"
                  },
                  "message": "Date required"
                }
              ]
            }
          ]
        }
      }
    },
    {
      "description": "TextField with regex validation",
      "valid": true,
      "data": {
        "version": "v0.10",
        "updateComponents": {
          "surfaceId": "test_1",
          "components": [
            {
              "id": "tf_regex",
              "component": "TextField",
              "label": "Phone",
              "value": { "path": "/formData/phone" },
              "checks": [
                {
                  "condition": {
                    "call": "regex",
                    "args": {
                      "value": { "path": "/formData/phone" },
                      "pattern": "^\\d{10}$"
                    },
                    "returnType": "boolean"
                  },
                  "message": "Must be 10 digits"
                }
              ]
            }
          ]
        }
      }
    },
    {
      "description": "TextField with min/max length validation",
      "valid": true,
      "data": {
        "version": "v0.10",
        "updateComponents": {
          "surfaceId": "test_1",
          "components": [
            {
              "id": "tf_len",
              "component": "TextField",
              "label": "Password",
              "value": { "path": "/formData/pw" },
              "checks": [
                {
                  "condition": {
                    "call": "length",
                    "args": {
                      "value": { "path": "/formData/pw" },
                      "min": 8,
                      "max": 64
                    },
                    "returnType": "boolean"
                  },
                  "message": "Password must be 8-64 characters"
                }
              ]
            }
          ]
        }
      }
    },
    {
      "description": "Slider with min/max numeric validation",
      "valid": true,
      "data": {
        "version": "v0.10",
        "updateComponents": {
          "surfaceId": "test_1",
          "components": [
            {
              "id": "sl_num",
              "component": "Slider",
              "label": "Score",
              "min": 0,
              "max": 100,
              "value": { "path": "/formData/score" },
              "checks": [
                {
                  "condition": {
                    "call": "numeric",
                    "args": {
                      "value": { "path": "/formData/score" },
                      "min": 0,
                      "max": 100
                    },
                    "returnType": "boolean"
                  },
                  "message": "Score must be between 0 and 100"
                }
              ]
            }
          ]
        }
      }
    },
    {
      "description": "TextField with complex logic checks (AND/OR/NOT)",
      "valid": true,
      "data": {
        "version": "v0.10",
        "updateComponents": {
          "surfaceId": "test_1",
          "components": [
            {
              "id": "tf_complex",
              "component": "TextField",
              "label": "Secret Code",
              "value": { "path": "/formData/code" },
              "checks": [
                {
                  "condition": {
                    "call": "and",
                    "args": {
                      "values": [
                        {
                          "call": "required",
                          "args": { "value": { "path": "/formData/code" } },
                          "returnType": "boolean"
                        },
                        {
                          "call": "or",
                          "args": {
                            "values": [
                              {
                                "call": "regex",
                                "args": {
                                  "value": { "path": "/formData/code" },
                                  "pattern": "^[A-Z]"
                                },
                                "returnType": "boolean"
                              },
                              {
                                "call": "not",
                                "args": {
                                  "value": {
                                    "call": "regex",
                                    "args": {
                                      "value": { "path": "/formData/code" },
                                      "pattern": "^[0-9]"
                                    },
                                    "returnType": "boolean"
                                  }
                                },
                                "returnType": "boolean"
                              }
                            ]
                          },
                          "returnType": "boolean"
                        }
                      ]
                    },
                    "returnType": "boolean"
                  },
                  "message": "Code must start with letter or not start with number"
                }
              ]
            }
          ]
        }
      }
    },
    {
      "description": "TextField with invalid check (missing message)",
      "valid": false,
      "data": {
        "version": "v0.10",
        "updateComponents": {
          "surfaceId": "test_1",
          "components": [
            {
              "id": "tf_invalid",
              "component": "TextField",
              "label": "Email",
              "value": { "path": "/formData/email" },
              "checks": [
                {
                  "condition": {
                    "call": "email",
                    "args": { "value": { "path": "/formData/email" } },
                    "returnType": "boolean"
                  }
                }
              ]
            }
          ]
        }
      }
    },
    {
      "description": "TextField with invalid function returnType in check",
      "valid": false,
      "data": {
        "version": "v0.10",
        "updateComponents": {
          "surfaceId": "test_1",
          "components": [
            {
              "id": "tf_wrong_type",
              "component": "TextField",
              "label": "Name",
              "value": { "path": "/formData/name" },
              "checks": [
                {
                  "condition": {
                    "call": "formatString",
                    "args": { "value": "Hello ${/formData/name}" },
                    "returnType": "string"
                  },
                  "message": "This should fail because returnType is string, not boolean"
                }
              ]
            }
          ]
        }
      }
    },
    {
      "description": "ChoicePicker with length validation (exactly 2)",
      "valid": true,
      "data": {
        "version": "v0.10",
        "updateComponents": {
          "surfaceId": "test_1",
          "components": [
            {
              "id": "cp_len",
              "component": "ChoicePicker",
              "label": "Interests",
              "variant": "multipleSelection",
              "options": [
                { "label": "A", "value": "a" },
                { "label": "B", "value": "b" },
                { "label": "C", "value": "c" }
              ],
              "value": { "path": "/formData/interests" },
              "checks": [
                {
                  "condition": {
                    "call": "length",
                    "args": {
                      "value": { "path": "/formData/interests" },
                      "min": 2,
                      "max": 2
                    },
                    "returnType": "boolean"
                  },
                  "message": "Select exactly 2 interests"
                }
              ]
            }
          ]
        }
      }
    }
  ]
}
