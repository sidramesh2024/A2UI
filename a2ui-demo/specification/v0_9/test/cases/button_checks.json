{
  "schema": "server_to_client.json",
  "tests": [
    {
      "description": "Button with nested valid checks",
      "valid": true,
      "data": {
        "version": "v0.9",
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "btn1",
              "component": "Button",
              "child": "txt1",
              "action": { "event": { "name": "submit" } },
              "checks": [
                {
                  "condition": {
                    "call": "and",
                    "args": {
                      "values": [
                        {
                          "call": "required",
                          "args": { "value": { "path": "/formData/terms" } },
                          "returnType": "boolean"
                        },
                        {
                          "call": "or",
                          "args": {
                            "values": [
                              {
                                "call": "required",
                                "args": { "value": { "path": "/formData/email" } },
                                "returnType": "boolean"
                              },
                              {
                                "call": "required",
                                "args": { "value": { "path": "/formData/phone" } },
                                "returnType": "boolean"
                              }
                            ]
                          },
                          "returnType": "boolean"
                        }
                      ]
                    },
                    "returnType": "boolean"
                  },
                  "message": "Must accept terms and provide contact info"
                }
              ]
            },
            { "id": "txt1", "component": "Text", "text": "Submit" }
          ]
        }
      }
    },
    {
      "description": "Button with deprecated enabled property (should fail)",
      "valid": false,
      "data": {
        "version": "v0.9",
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "btn2",
              "component": "Button",
              "child": "txt2",
              "action": { "event": { "name": "submit" } },
              "enabled": { "path": "/some/path" }
            },
            { "id": "txt2", "component": "Text", "text": "Submit" }
          ]
        }
      }
    },
    {
      "description": "Button with invalid check structure (invalid returnType)",
      "valid": false,
      "data": {
        "version": "v0.9",
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "btn3",
              "component": "Button",
              "child": "txt3",
              "action": { "event": { "name": "submit" } },
              "checks": [
                {
                  "condition": {
                    "call": "required",
                    "args": { "value": "foo" },
                    "returnType": "not_a_valid_type"
                  },
                  "message": "Msg"
                }
              ]
            },
            { "id": "txt3", "component": "Text", "text": "Submit" }
          ]
        }
      }
    },
    {
      "description": "Button with invalid nested structure (extra property)",
      "valid": false,
      "data": {
        "version": "v0.9",
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "btn4",
              "component": "Button",
              "child": "txt4",
              "action": { "event": { "name": "submit" } },
              "checks": [
                {
                  "condition": {
                    "call": "and",
                    "args": { "values": [] },
                    "returnType": "boolean"
                  },
                  "message": "foo",
                  "extraProp": "not allowed"
                }
              ]
            },
            { "id": "txt4", "component": "Text", "text": "Submit" }
          ]
        }
      }
    },
    {
      "description": "Button with variant 'primary'",
      "valid": true,
      "data": {
        "version": "v0.9",
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "btn_primary",
              "component": "Button",
              "child": "txt_primary",
              "action": { "event": { "name": "submit" } },
              "variant": "primary"
            },
            { "id": "txt_primary", "component": "Text", "text": "Submit" }
          ]
        }
      }
    },
    {
      "description": "Button with variant 'borderless'",
      "valid": true,
      "data": {
        "version": "v0.9",
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "btn_borderless",
              "component": "Button",
              "child": "txt_borderless",
              "action": { "event": { "name": "cancel" } },
              "variant": "borderless"
            },
            { "id": "txt_borderless", "component": "Text", "text": "Cancel" }
          ]
        }
      }
    },
    {
      "description": "Button with deprecated 'primary' property (should fail)",
      "valid": false,
      "data": {
        "version": "v0.9",
        "updateComponents": {
          "surfaceId": "test_surface",
          "components": [
            {
              "id": "btn_dep",
              "component": "Button",
              "child": "txt_dep",
              "action": { "event": { "name": "submit" } },
              "primary": true
            },
            { "id": "txt_dep", "component": "Text", "text": "Submit" }
          ]
        }
      }
    }
  ]
}
